# AI 면접 시스템 아키텍처 (현재 구현됨)

## 🎯 **프로젝트 핵심 목적**
**AI와 1:1 경쟁 면접 시스템** - 사용자가 AI 지원자 "춘식이"와 턴제 방식으로 경쟁하는 면접 시뮬레이션

## 📊 **현재 구현된 기능**
- ✅ **일대일 AI 경쟁 면접**: 사용자 vs AI "춘식이" 턴제 면접
- ✅ **개인화 면접**: 문서 기반 맞춤형 질문 생성
- ✅ **실시간 평가 시스템**: GPT-4o-mini + AutoML 기반 평가
- ✅ **7개 주요 IT 기업 특화**: 네이버, 카카오, 라인, 쿠팡, 배민, 당근, 토스

## 🏗️ **현재 구현된 기술 스택**
- **Frontend**: React 19.1.0 + TypeScript + Tailwind CSS
- **Backend**: FastAPI 0.104+ + Python 3.10+ + Uvicorn
- **AI/ML**: OpenAI GPT-4o-mini + AutoML (AutoGluon)
- **Database**: Supabase (PostgreSQL + Real-time subscriptions)
- **Document Processing**: PyPDF2, python-docx, sentence-transformers
- **Infrastructure**: CORS middleware, JWT authentication

## 현재 구현된 시스템 구조도

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                        REACT FRONTEND (SPA)                                    │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                 │
│  │   면접 설정     │  │   1:1 AI 면접   │  │   결과 분석     │                 │
│  │                │  │                │  │                │                 │
│  │ • 기업 선택    │  │ • 턴제 진행    │  │ • 사용자 vs AI  │                 │
│  │ • 직무 선택    │  │ • 실시간 질문  │  │ • 상세 피드백   │                 │
│  │ • 이력서 업로드│  │ • AI 답변 생성 │  │ • 개선점 제시   │                 │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘                 │
│                                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                 │
│  │   API 클라이언트│  │   상태 관리     │  │   UI 컴포넌트   │                 │
│  │                │  │                │  │                │                 │
│  │ • HTTP 요청    │  │ • React Context│  │ • 면접 UI      │                 │
│  │ • 에러 처리    │  │ • Custom Hooks │  │ • 타임라인     │                 │
│  │ • 재시도 로직  │  │ • 로컬 상태    │  │ • 인터랙션     │                 │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘                 │
└─────────────────────────────────────────────────────────────────────────────────┘
                                      │
                                  HTTPS REST API
                                      │
┌─────────────────────────────────────────────────────────────────────────────────┐
│                        FASTAPI BACKEND SERVER                                  │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                 │
│  │   API 라우터    │  │   서비스 계층   │  │   스키마 정의   │                 │
│  │                │  │                │  │                │                 │
│  │ • interview.py │  │ • 면접 서비스   │  │ • Pydantic 모델│                 │
│  │ • auth.py      │  │ • 인증 서비스   │  │ • 요청/응답 모델│                 │
│  │ • company.py   │  │ • DB 클라이언트 │  │ • 유효성 검증  │                 │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘                 │
└─────────────────────────────────────────────────────────────────────────────────┘
                                      │
                                  LLM API 호출
                                      │
┌─────────────────────────────────────────────────────────────────────────────────┐
│                           LLM 모듈 (v3.0 핵심)                                │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                 │
│  │   면접관 모듈   │  │   AI 지원자     │  │   평가 시스템   │                 │
│  │                │  │                │  │                │                 │
│  │ • 질문 생성    │  │ • 답변 생성    │  │ • GPT-4o 평가  │                 │
│  │ • 개인화 질문  │  │ • 페르소나     │  │ • AutoML 평가  │                 │
│  │ • 중복 방지    │  │ • 일관성 유지  │  │ • 종합 피드백  │                 │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘                 │
└─────────────────────────────────────────────────────────────────────────────────┘
                        │                    │                    │
                   OpenAI API          Supabase DB           AutoML Models
                        │                    │                    │
┌──────────────────┐ ┌──────────────────┐ ┌──────────────────────────────────┐
│   GPT-4o-mini    │ │   PostgreSQL     │ │        AutoGluon                │
│                  │ │                  │ │                                  │
│ • 질문 생성      │ │ • 사용자 데이터  │ │ • 면접 점수 예측                 │
│ • 답변 생성      │ │ • 면접 기록      │ │ • 특성 추출                      │
│ • 평가 생성      │ │ • 회사 정보      │ │ • 실시간 평가                    │
└──────────────────┘ └──────────────────┘ └──────────────────────────────────┘
```
│  │ • Health Check │  │ • 모니터링     │  │ • 압축 최적화  │                 │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘                 │
└─────────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      │
┌─────────────────────────────────────────────────────────────────────────────────┐
│                          BACKEND SERVICES                                      │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────────────┐│
│  │                       FASTAPI MAIN SERVER                                  ││
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐              ││
│  │  │다대다 면접 API   │  │AI 지원자 관리API│  │  평가 시스템 API │              ││
│  │  │                │  │                │  │                │              ││
│  │  │ • 세션 생성    │  │ • AI 지원자 생성│  │ • 답변 평가    │              ││
│  │  │ • 참가자 관리  │  │ • 페르소나 관리 │  │ • 순위 계산    │              ││
│  │  │ • 질문 관리    │  │ • 답변 생성    │  │ • 피드백 생성  │              ││
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘              ││
│  └─────────────────────────────────────────────────────────────────────────────┘│
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────┐│
│  │                       WEBSOCKET SERVER                                     ││
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐              ││
│  │  │  실시간 턴 관리 │  │브로드캐스트 관리│  │세션 상태 관리   │              ││
│  │  │                │  │                │  │                │              ││
│  │  │ • 턴 순서 제어 │  │ • 실시간 알림  │  │ • 상태 동기화  │              ││
│  │  │ • 타임아웃 관리│  │ • 메시지 전송  │  │ • 연결 관리    │              ││
│  │  │ • 참가자 동기화│  │ • 이벤트 배포  │  │ • 장애 복구    │              ││
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘              ││
│  └─────────────────────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      │
┌─────────────────────────────────────────────────────────────────────────────────┐
│                       CORE BUSINESS LOGIC                                      │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────────────┐│
│  │                    MULTI CANDIDATE SESSION                                 ││
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐              ││
│  │  │   세션 관리자   │  │  질문 큐 관리   │  │  턴 순서 관리   │              ││
│  │  │                │  │                │  │                │              ││
│  │  │ • 세션 생성    │  │ • 질문 생성    │  │ • 순서 제어    │              ││
│  │  │ • 참가자 관리  │  │ • 질문 큐 관리 │  │ • 타이머 관리  │              ││
│  │  │ • 상태 추적    │  │ • 난이도 조절  │  │ • 건너뛰기 처리│              ││
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘              ││
│  └─────────────────────────────────────────────────────────────────────────────┘│
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────┐│
│  │                        AI 지원자 모델                                       ││
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐              ││
│  │  │  네이버 AI     │  │  카카오 AI     │  │   토스 AI      │              ││
│  │  │               │  │               │  │               │              ││
│  │  │ • 검색 전문가 │  │ • 플랫폼 전문가│  │ • 핀테크 전문가│              ││
│  │  │ • 대용량 시스템│  │ • MSA 아키텍처│  │ • 보안 전문가  │              ││
│  │  │ • 기술 깊이   │  │ • 사회적 가치 │  │ • UX 최적화   │              ││
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘              ││
│  │                                                                             ││
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐              ││
│  │  │   쿠팡 AI      │  │   배민 AI      │  │  당근 AI       │              ││
│  │  │               │  │               │  │               │              ││
│  │  │ • 이커머스 전문│  │ • 실시간 매칭 │  │ • 지역 서비스  │              ││
│  │  │ • 물류 최적화 │  │ • 코드 품질   │  │ • 커뮤니티 전문│              ││
│  │  │ • 스케일링    │  │ • 팀워크 강조 │  │ • 신뢰 시스템  │              ││
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘              ││
│  └─────────────────────────────────────────────────────────────────────────────┘│
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────┐│
│  │                    COMPETITIVE EVALUATOR                                   ││
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐              ││
│  │  │  답변 비교 엔진 │  │실시간 순위 계산 │  │  피드백 생성기  │              ││
│  │  │                │  │                │  │                │              ││
│  │  │ • 답변 분석    │  │ • 점수 계산    │  │ • 개인 피드백  │              ││
│  │  │ • 유사도 검사  │  │ • 랭킹 업데이트│  │ • 비교 분석    │              ││
│  │  │ • 품질 평가    │  │ • 통계 생성    │  │ • 개선 제안    │              ││
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘              ││
│  └─────────────────────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      │
┌─────────────────────────────────────────────────────────────────────────────────┐
│                        EXTERNAL AI SERVICES                                    │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                 │
│  │   OpenAI GPT    │  │  Google Gemini  │  │  기타 LLM 모델  │                 │
│  │                │  │                │  │                │                 │
│  │ • GPT-4o       │  │ • Gemini Pro   │  │ • KT 믿음      │                 │
│  │ • GPT-4o-mini  │  │ • Gemini Flash │  │ • Claude       │                 │
│  │ • 답변 생성    │  │ • 답변 생성    │  │ • 답변 생성    │                 │
│  │ • 평가 및 채점 │  │ • 평가 및 채점 │  │ • 평가 및 채점 │                 │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘                 │
└─────────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      │
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              DATA LAYER                                        │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────────────┐│
│  │                           SUPABASE DATABASE                                ││
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐              ││
│  │  │   사용자 관리   │  │면접 세션 데이터 │  │AI 지원자 페르소나│              ││
│  │  │                │  │                │  │                │              ││
│  │  │ • 회원 정보    │  │ • 세션 상태    │  │ • 기업별 설정  │              ││
│  │  │ • 인증/권한    │  │ • 참가자 목록  │  │ • 개성 설정    │              ││
│  │  │ • 프로필 관리  │  │ • 질문/답변 로그│  │ • 답변 패턴    │              ││
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘              ││
│  │                                                                             ││
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐              ││
│  │  │   평가 결과     │  │  실시간 채팅    │  │   분석 데이터   │              ││
│  │  │                │  │                │  │                │              ││
│  │  │ • 점수 기록    │  │ • 메시지 로그  │  │ • 성능 지표    │              ││
│  │  │ • 피드백 저장  │  │ • 실시간 동기화│  │ • 사용 통계    │              ││
│  │  │ • 순위 기록    │  │ • 알림 관리    │  │ • 트렌드 분석  │              ││
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘              ││
│  └─────────────────────────────────────────────────────────────────────────────┘│
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────┐│
│  │                            REDIS CACHE                                     ││
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐              ││
│  │  │세션 상태 캐시   │  │실시간 순위 캐시 │  │  턴 상태 캐시   │              ││
│  │  │                │  │                │  │                │              ││
│  │  │ • 활성 세션    │  │ • 실시간 점수  │  │ • 현재 턴 정보 │              ││
│  │  │ • 참가자 상태  │  │ • 순위 업데이트│  │ • 타이머 상태  │              ││
│  │  │ • 임시 데이터  │  │ • 성능 최적화  │  │ • 대기 큐     │              ││
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘              ││
│  └─────────────────────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      │
┌─────────────────────────────────────────────────────────────────────────────────┐
│                            FILE STORAGE                                        │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────────────┐│
│  │                             AWS S3                                         ││
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐              ││
│  │  │    음성 파일    │  │    영상 파일    │  │    문서 파일    │              ││
│  │  │                │  │                │  │                │              ││
│  │  │ • 답변 음성    │  │ • 면접 영상    │  │ • 이력서       │              ││
│  │  │ • 실시간 녹음  │  │ • 화면 녹화    │  │ • 포트폴리오   │              ││
│  │  │ • 압축 최적화  │  │ • 스트리밍 지원│  │ • 자기소개서   │              ││
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘              ││
│  │                                                                             ││
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐              ││
│  │  │   면접 녹화본   │  │   정적 자산     │  │   백업 데이터   │              ││
│  │  │                │  │                │  │                │              ││
│  │  │ • 전체 면접    │  │ • 이미지 파일  │  │ • 데이터 백업  │              ││
│  │  │ • 하이라이트   │  │ • CSS/JS 파일  │  │ • 로그 아카이브│              ││
│  │  │ • 분석 자료    │  │ • 폰트 파일    │  │ • 설정 백업    │              ││
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘              ││
│  └─────────────────────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      │
┌─────────────────────────────────────────────────────────────────────────────────┐
│                      CONTAINER & DEPLOYMENT                                    │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────────────┐│
│  │                        DOCKER CONTAINERS                                   ││
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐              ││
│  │  │FastAPI Container│  │WebSocket Container│  │Redis Container │              ││
│  │  │                │  │                │  │                │              ││
│  │  │ • API 서버     │  │ • 실시간 통신  │  │ • 캐시 서버    │              ││
│  │  │ • 비즈니스 로직│  │ • 세션 관리    │  │ • 세션 저장    │              ││
│  │  │ • 데이터 처리  │  │ • 이벤트 처리  │  │ • 성능 최적화  │              ││
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘              ││
│  └─────────────────────────────────────────────────────────────────────────────┘│
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────┐│
│  │                         AWS ECS/EKS                                        ││
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐              ││
│  │  │  컨테이너 관리  │  │  오토 스케일링  │  │   모니터링      │              ││
│  │  │                │  │                │  │                │              ││
│  │  │ • 배포 관리    │  │ • 트래픽 대응  │  │ • CloudWatch   │              ││
│  │  │ • 버전 관리    │  │ • 리소스 최적화│  │ • 성능 지표    │              ││
│  │  │ • 롤백 지원    │  │ • 비용 최적화  │  │ • 알림 시스템  │              ││
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘              ││
│  └─────────────────────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────────────────────┘
```

## 데이터 플로우 다이어그램

```
사용자 입력 → React UI → WebSocket → FastAPI → MultiCandidateSession
                                         ↓
AI 지원자 생성 ← External AI Services ← AI 지원자 모델 ← 질문 처리
                                         ↓
답변 평가 → CompetitiveEvaluator → 실시간 순위 계산 → Redis Cache
                                         ↓
결과 저장 → Supabase DB → 피드백 생성 → WebSocket → React UI
```

## 실시간 통신 흐름

```
┌─────────────┐    WebSocket     ┌─────────────┐    Redis     ┌─────────────┐
│   React     │ ←─────────────→  │  WebSocket  │ ←─────────→  │   Cache     │
│   Client    │                  │   Server    │              │   Layer     │
└─────────────┘                  └─────────────┘              └─────────────┘
        │                                │                            │
        │                                │                            │
        ▼                                ▼                            ▼
┌─────────────┐                  ┌─────────────┐              ┌─────────────┐
│ 1. 질문 수신│                  │ 2. 턴 관리  │              │ 3. 상태 캐시│
│ 2. 답변 입력│                  │ 3. 브로드캐스트│              │ 4. 순위 업데이트│
│ 3. 순위 표시│                  │ 4. 동기화   │              │ 5. 성능 최적화│
└─────────────┘                  └─────────────┘              └─────────────┘
```

## 핵심 컴포넌트 상호작용

```
MultiCandidateSession
        │
        ├─── ParticipantManager ──── 사용자 + AI 지원자 관리
        │
        ├─── QuestionQueueManager ──── 질문 순서 및 난이도 관리
        │
        ├─── TurnOrderManager ──── 실시간 턴 순서 제어
        │
        └─── CompetitiveEvaluator ──── 답변 비교 및 순위 계산
                │
                ├─── AnswerComparator ──── 답변 품질 비교
                │
                ├─── RankCalculator ──── 실시간 순위 계산
                │
                └─── FeedbackGenerator ──── 개인별 피드백 생성
```

이 아키텍처는 **사용자가 여러 AI 지원자들과 함께 경쟁하는 다대다 면접 시뮬레이션**을 완벽히 지원하도록 설계되었습니다.